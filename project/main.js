(()=>{"use strict";const r=class{constructor(r){this.name=r,this.ships=[],this.board=new class{constructor(){this.boardPositionArray=[],this.hasShipArray=[],this.boardCreate()}boardCreate(){for(let r=0;r<100;r++)this.boardPositionArray.push(r)}receiveAttack(r){return this.boardPositionArray.includes(r)?(this.boardPositionArray.includes(r)&&this.boardPositionArray.splice(r,1),this.checkingIfHit(r)):"out of the box"}checkingIfHit(r){return!!this.hasShipArray.includes(r)&&(this.hasShipArray.splice(this.hasShipArray.indexOf(r),1),!0)}gameEnd(){return!(0!==this.hasShipArray.length)}shipsPlacement(r){const e=r.sort(((r,e)=>r-e)),s=[9,19,29,39,49,59,69,79,89,99],t=[90,91,92,93,94,95,96,97,98,99];for(let i=0;i<e.length-1;i++){if(r[i]<0)return!1;if(!this.boardPositionArray.includes(e[i]))return!1;if(this.hasShipArray.includes(r[i]))return!1;if(this.hasShipArray.includes(r[e.length-1]))return!1;if(e[i+1]-e[i]!=1&&e[i+1]-e[i]!=10)return!1;if(s.includes(e[i])||t.includes(e[i])){if(r.every((r=>s.includes(r)||t.includes(r))))break;if(i!==e.length||0!==i)return!1}}return this.hasShipArray.push(...e),!0}}}};class e{constructor(r,e,s,t=0){this.name=r,this.length=e,this.position=s,this.hits=t,this.hasSunken=!1}hit(r){this.position.splice(this.position.indexOf(r),1),this.hits++,this.isSunk(this.hits)}isSunk(){0===this.position.length&&(this.hasSunken=!0)}}const s=new r("player"),t=new r("computer");!function(){!function(){function r(r,e=10,s=10){r.style.setProperty("--grid-rows",e),r.style.setProperty("--grid-cols",s);for(let t=0;t<e*s;t++){const e=document.createElement("div");r.appendChild(e),e.classList.add("grid-item"),e.id=t}}const e=document.querySelector(".player-1"),s=document.querySelector(".player-2");r(e),r(s)}();const r=(e,s)=>{const t=Math.floor(100*Math.random()),i=[];for(let r=0;r<e;r++)i.push(t+r);return s.board.shipsPlacement(i)?i:r(e,s)};document.querySelector(".randomPlayer").addEventListener("click",(()=>{console.log(s),s.ships=[],s.board.hasShipArray=[];const t=document.querySelectorAll(".player-1 .grid-item");t.forEach((r=>{r.style.backgroundColor="white"}));let i=5;for(let t=0;t<5;t++){const o=new e(`ship${t}`,i,r(i,s));s.ships.push(o),2!==i&&i--}for(let r=0;r<5;r++)0===r&&(s.board.hasShipArray=[]),s.board.shipsPlacement(s.ships[r].position);t.forEach((r=>{s.board.hasShipArray.includes(parseInt(r.id,10))&&(r.style.backgroundColor="green")})),console.log(s)})),(()=>{let s=5;for(let i=0;i<5;i++){const o=new e(`ship${i}`,s,r(s,t));t.ships.push(o),2!==s&&s--}for(let r=0;r<5;r++)0===r&&(t.board.hasShipArray=[]),t.board.shipsPlacement(t.ships[r].position)})()}(),function(){const r=r=>0===r.board.hasShipArray.length&&(document.querySelector(".game").style.pointerEvents="none",console.log(`${r.name} Lost`),!0),e=[],i=[],o=document.querySelector(".player-1"),n=document.querySelector(".player-2");o.classList.add("turn"),document.querySelectorAll(".player-2 .grid-item").forEach((a=>{a.addEventListener("click",(()=>{const l=parseFloat(a.id);if(!e.includes(l)){e.push(l);const h=t.board.hasShipArray;if(h.includes(l)){if(a.style.backgroundColor="red",h.splice(h.indexOf(l),1),r(t))return 0}else a.style.backgroundColor="yellow";n.classList.add("turn"),o.classList.remove("turn"),setTimeout((()=>{(()=>{const e=Math.floor(Math.random()*s.board.boardPositionArray.length),t=s.board.boardPositionArray[e];if(s.board.boardPositionArray.splice(e,1),!i.includes(t)){const e=document.getElementById(`${t}`);i.push(t);const a=s.board.hasShipArray;if(a.includes(t)){if(e.style.backgroundColor="red",a.splice(a.indexOf(t),1),r(s))return 0}else e.style.backgroundColor="yellow";o.classList.add("turn"),n.classList.remove("turn")}})()}),1e3)}return 0}))}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxJQUdsQixHQUZBaUUsRUFBS3JDLE1BQU00QixnQkFBa0IsTUFDN0JXLEVBQVVqRSxPQUFPaUUsRUFBVS9ELFFBQVFKLEdBQUssR0FDckM2RCxFQUFhdEMsR0FBVyxPQUFPLE9BR2xDMEMsRUFBS3JDLE1BQU00QixnQkFBa0IsU0FHakNoQixFQUFVTCxVQUFVQyxJQUFJLFFBQ3hCRSxFQUFVSCxVQUFVaUMsT0FBTyxRQUUzQkMsWUFBVyxLQTNDRixNQUNqQixNQUFNekIsRUFBZUMsS0FBS0MsTUFBTUQsS0FBS0UsU0FBUyxtQ0FDeEMvQyxFQUFNLDJCQUFnQzRDLEdBR3hDLEdBREosa0NBQXVDQSxFQUFjLElBQzVDb0IsRUFBZS9ELFNBQVNELEdBQU0sQ0FDL0IsTUFBTWlFLEVBQU9qQyxTQUFTc0MsZUFBZSxHQUFHdEUsS0FDeENnRSxFQUFlbEUsS0FBS0UsR0FDcEIsTUFBTW1FLEVBQVkscUJBQ2xCLEdBQUdBLEVBQVVsRSxTQUFTRCxJQUdsQixHQUZBaUUsRUFBS3JDLE1BQU00QixnQkFBa0IsTUFDN0JXLEVBQVVqRSxPQUFPaUUsRUFBVS9ELFFBQVFKLEdBQUssR0FDckM2RCxFQUFhLEdBQVMsT0FBTyxPQUdoQ0ksRUFBS3JDLE1BQU00QixnQkFBa0IsU0FHakNsQixFQUFVSCxVQUFVQyxJQUFJLFFBQ3hCSSxFQUFVTCxVQUFVaUMsT0FBTyxPQUMvQixDQUNRLEVBdUJBRyxFQUFjLEdBQ2YsSUFDUCxDQUNBLE9BQU8sQ0FBQyxHQUNYLEdBRVQsQ0RyRUFDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvZ2FtZUJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lQ3JlYXRpb24vc2hpcFBsYWNlbWVudC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVDcmVhdGlvbi9nYW1lQm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVDcmVhdGlvbi9oaXRHYW1lQm9hcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgR2FtZUJvYXJke1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLmJvYXJkUG9zaXRpb25BcnJheSA9IFtdO1xyXG4gICAgICAgIHRoaXMuaGFzU2hpcEFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy5ib2FyZENyZWF0ZSgpOy8vIGluc3RhbnRseSBjcmVhdGVzIGEgYm9hcmRcclxuICAgIH1cclxuXHJcbiAgICBib2FyZENyZWF0ZSgpe1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7aTwxMDA7aSsrKXtcclxuICAgICAgICAgICAgdGhpcy5ib2FyZFBvc2l0aW9uQXJyYXkucHVzaChpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVjZWl2ZUF0dGFjayhwb3Mpey8vIHJlY2VpdmVzIGF0dGFjayBhbmQgbWFya3MgaWYgaGl0IG9yIG1pc3NcclxuICAgICAgICBpZighdGhpcy5ib2FyZFBvc2l0aW9uQXJyYXkuaW5jbHVkZXMocG9zKSkgcmV0dXJuIFwib3V0IG9mIHRoZSBib3hcIjtcclxuICAgICAgICBpZih0aGlzLmJvYXJkUG9zaXRpb25BcnJheS5pbmNsdWRlcyhwb3MpKXtcclxuICAgICAgICAgICAgdGhpcy5ib2FyZFBvc2l0aW9uQXJyYXkuc3BsaWNlKHBvcywxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tpbmdJZkhpdChwb3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNraW5nSWZIaXQocG9zKXtcclxuICAgICAgICBpZih0aGlzLmhhc1NoaXBBcnJheS5pbmNsdWRlcyhwb3MpKXsvLyBjaGVja2luZyBoaXQsIGlmIGhpdCByZW1vdmVzIGJsb2NrIGZyb20gc2hpcEFycmF5XHJcbiAgICAgICAgICAgIHRoaXMuaGFzU2hpcEFycmF5LnNwbGljZSh0aGlzLmhhc1NoaXBBcnJheS5pbmRleE9mKHBvcyksMSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2FtZUVuZCgpey8vIGNoZWNrIGlmIGFsbCBzaGlwcyBzdW5rXHJcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuaGFzU2hpcEFycmF5Lmxlbmd0aCA9PT0gMCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hpcHNQbGFjZW1lbnQoc2hpcHNBcnIpe1xyXG4gICAgICAgIGNvbnN0IHNob3J0ZWRTaGlwc0FyciA9IHNoaXBzQXJyLnNvcnQoKGEsIGIpID0+YSAtIGIpOy8vIHNvcnRpbmdcclxuICAgICAgICAvLyBib3JkZXIgb2YgdGhlIGJvYXJkXHJcbiAgICAgICAgY29uc3QgYm9yZGVySG9yaXpvbnRhbCA9IFs5LDE5LDI5LDM5LDQ5LDU5LDY5LDc5LDg5LDk5XTtcclxuICAgICAgICBjb25zdCBib3JkZXJWZXJ0aWNhbCA9IFs5MCw5MSw5Miw5Myw5NCw5NSw5Niw5Nyw5OCw5OV07XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNob3J0ZWRTaGlwc0Fyci5sZW5ndGgtMTtpKyspe1xyXG4gICAgICAgICAgICAvLyBwbGFjZW1lbnQgYmV5b25kIGJvYXJkXHJcbiAgICAgICAgICAgIGlmKHNoaXBzQXJyW2ldPDApIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZighdGhpcy5ib2FyZFBvc2l0aW9uQXJyYXkuaW5jbHVkZXMoc2hvcnRlZFNoaXBzQXJyW2ldKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBubyBvdmVybGFwcGluZyBvZiBzaGlwc1xyXG4gICAgICAgICAgICBpZih0aGlzLmhhc1NoaXBBcnJheS5pbmNsdWRlcyhzaGlwc0FycltpXSkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYodGhpcy5oYXNTaGlwQXJyYXkuaW5jbHVkZXMoc2hpcHNBcnJbc2hvcnRlZFNoaXBzQXJyLmxlbmd0aC0xXSkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgLy8gcGxhY2VtZW50IGluIHJhbmRvbSBvcmRlclxyXG4gICAgICAgICAgICBpZighKChzaG9ydGVkU2hpcHNBcnJbaSsxXSAtIHNob3J0ZWRTaGlwc0FycltpXSkgPT09IDEgXHJcbiAgICAgICAgICAgIHx8IChzaG9ydGVkU2hpcHNBcnJbaSsxXSAtIHNob3J0ZWRTaGlwc0FycltpXSkgPT09IDEwKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBwbGFjZW1lbnQgY3Jvc3NlcyB0aGUgdmVydGljYWwgYW5kIGhvcml6b250b2wgYm9yZGVyXHJcbiAgICAgICAgICAgIGlmKGJvcmRlckhvcml6b250YWwuaW5jbHVkZXMoc2hvcnRlZFNoaXBzQXJyW2ldKSBcclxuICAgICAgICAgICAgfHwgYm9yZGVyVmVydGljYWwuaW5jbHVkZXMoc2hvcnRlZFNoaXBzQXJyW2ldKSl7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKHNoaXBzQXJyLmV2ZXJ5KGVsZW0gPT4gYm9yZGVySG9yaXpvbnRhbC5pbmNsdWRlcyhlbGVtKSBcclxuICAgICAgICAgICAgICAgIHx8IGJvcmRlclZlcnRpY2FsLmluY2x1ZGVzKGVsZW0pKSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBpZighKGkgPT09IHNob3J0ZWRTaGlwc0Fyci5sZW5ndGggJiYgaSA9PT0gMCkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhZGRzIHNoaXAgdG8gZnJlc2ggbG9jYXRpb25cclxuICAgICAgICB0aGlzLmhhc1NoaXBBcnJheS5wdXNoKC4uLnNob3J0ZWRTaGlwc0Fycik7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVCb2FyZCIsImltcG9ydCBHYW1lQm9hcmQgZnJvbSBcIi4vZ2FtZUJvYXJkXCI7XHJcblxyXG5jbGFzcyBQbGF5ZXJ7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKXtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuc2hpcHMgPSBbXTtcclxuICAgICAgICB0aGlzLmJvYXJkID0gbmV3IEdhbWVCb2FyZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGxheWVyIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hpcHN7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLGxlbmd0aCxwb3NpdGlvbiwgaGl0cyA9IDApe1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuaGl0cyA9IGhpdHM7XHJcbiAgICAgICAgdGhpcy5oYXNTdW5rZW4gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBoaXQocG9zaXRpb24pey8vIGhpdHMgdGhlIHBvc2l0aW9uIGFuZCByZW1vdmVzIHRoZSBwb3NpdGlvbiBmcm9tIHRoZSBhcnJheVxyXG4gICAgICAgIHRoaXMucG9zaXRpb24uc3BsaWNlKHRoaXMucG9zaXRpb24uaW5kZXhPZihwb3NpdGlvbiksMSk7XHJcbiAgICAgICAgdGhpcy5oaXRzKys7XHJcbiAgICAgICAgdGhpcy5pc1N1bmsodGhpcy5oaXRzKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1N1bmsoKXsvLyBvbmNlIGFsbCBoaXQgaXQgc2lua3NcclxuICAgICAgICBpZih0aGlzLnBvc2l0aW9uLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmhhc1N1bmtlbiA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnRpbnVlICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXHJcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4uL21vZHVsZXMvcGxheWVyXCJcclxuaW1wb3J0IFNoaXBzIGZyb20gXCIuLi9tb2R1bGVzL3NoaXBcIlxyXG5pbXBvcnQgZ2FtZUJvYXJkIGZyb20gXCIuL2dhbWVCb2FyZFwiO1xyXG5cclxuLy8gdHdvIG5ldyBwbGF5ZXJzIGNyZWF0ZWRcclxuY29uc3QgcGxheWVyID0gbmV3IFBsYXllcihcInBsYXllclwiKTtcclxuY29uc3QgY29tcHV0ZXIgPSBuZXcgUGxheWVyKFwiY29tcHV0ZXJcIilcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2hpcHMoKXtcclxuICAgIGdhbWVCb2FyZCgpOy8vIGJveCBhcmVhIGZvciBib3RoIHBsYXllcnNcclxuXHJcbiAgICBjb25zdCBnZXRSYW5kb21MZWdhbFBvc2l0aW9uID0gKGosIHBlcnNvbik9PntcclxuICAgICAgICBjb25zdCByYW5kb21OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgICAgIGNvbnN0IG5ld0FycmF5ID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpIDwgajtpKyspe1xyXG4gICAgICAgICAgICBuZXdBcnJheS5wdXNoKHJhbmRvbU51bWJlcitpKTsvLyBhIHJhbmRvbSBudW1iZXIgYW5kIG1ha2UgYSBzZXJpYWxpc2VkIGFycmF5IG9mIGl0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBlcnNvbi5ib2FyZC5zaGlwc1BsYWNlbWVudChuZXdBcnJheSkpIHJldHVybiBuZXdBcnJheTsvLyBpZiBwbGFjZW1lbnQgaXQgY29ycmVjdCByZXR1cm5zXHJcbiAgICAgICAgcmV0dXJuIGdldFJhbmRvbUxlZ2FsUG9zaXRpb24oaiwgcGVyc29uKTsvLyBpZiBub3QgcmVjdXJzaXZlIGZ1bmN0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGxheWVyU2hpcHMgPSAoKT0+ey8vIGNyZWF0ZXMgc2hpcHMgZm9yIHBsYXllciBhdCByYW5kb20gcGxhY2VzXHJcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyKTtcclxuICAgICAgICBwbGF5ZXIuc2hpcHMgPSBbXTtcclxuICAgICAgICBwbGF5ZXIuYm9hcmQuaGFzU2hpcEFycmF5ID0gW107XHJcbiAgICAgICAgY29uc3QgZ3JpZEl0ZW1QbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBsYXllci0xIC5ncmlkLWl0ZW1cIik7XHJcbiAgICAgICAgZ3JpZEl0ZW1QbGF5ZXIuZm9yRWFjaCgoZ3JpZCk9PntcclxuICAgICAgICAgICAgZ3JpZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBsZXQgaiA9IDU7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpIDwgNTtpKyspe1xyXG4gICAgICAgICAgICBjb25zdCBwbGF5ZXJTaGlwID0gbmV3IFNoaXBzKGBzaGlwJHtpfWAsaiwgZ2V0UmFuZG9tTGVnYWxQb3NpdGlvbihqLCBwbGF5ZXIpKTtcclxuICAgICAgICAgICAgcGxheWVyLnNoaXBzLnB1c2gocGxheWVyU2hpcCk7XHJcbiAgICAgICAgICAgIC8vIG5vIHNoaXBzIGxlc3MgdGhhbiAyIGluIHNpemVcclxuICAgICAgICAgICAgaWYoaiA9PT0gMikgY29udGludWU7XHJcbiAgICAgICAgICAgIGotLTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9MDsgaTw1O2krKyl7XHJcbiAgICAgICAgICAgIGlmKGk9PT0wKSBwbGF5ZXIuYm9hcmQuaGFzU2hpcEFycmF5ID0gW107Ly8gY2xlYXJpbmcgdGhlIHNoaXAgYXJyYXlcclxuICAgICAgICAgICAgcGxheWVyLmJvYXJkLnNoaXBzUGxhY2VtZW50KHBsYXllci5zaGlwc1tpXS5wb3NpdGlvbik7Ly8gZmlsbGluZyBpdCB3aXRoIHByb3BlciBwbGFjZW1lbnRzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBncmlkSXRlbVBsYXllci5mb3JFYWNoKChncmlkKT0+ey8vIHNob3dpbmcgdGhlIHBsYXllcidzIHNoaXAgbG9jYXRpb25cclxuICAgICAgICBpZihwbGF5ZXIuYm9hcmQuaGFzU2hpcEFycmF5LmluY2x1ZGVzKHBhcnNlSW50KGdyaWQuaWQsIDEwKSkpe1xyXG4gICAgICAgICAgICBncmlkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ3JlZW5cIjtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKHBsYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29tcHV0ZXJTaGlwcyA9ICgpPT57XHJcbiAgICAgICAgbGV0IGogPSA1O1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7aSA8IDU7aSsrKXtcclxuICAgICAgICAgICAgY29uc3QgY29tcFNoaXAgPSBuZXcgU2hpcHMoYHNoaXAke2l9YCxqLCBnZXRSYW5kb21MZWdhbFBvc2l0aW9uKGosIGNvbXB1dGVyKSlcclxuICAgICAgICAgICAgY29tcHV0ZXIuc2hpcHMucHVzaChjb21wU2hpcCk7XHJcbiAgICAgICAgICAgIGlmKGogPT09IDIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBqLS07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IobGV0IGkgPTAgOyBpPDU7aSsrKXtcclxuICAgICAgICAgICAgaWYoaT09PTApIGNvbXB1dGVyLmJvYXJkLmhhc1NoaXBBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICBjb21wdXRlci5ib2FyZC5zaGlwc1BsYWNlbWVudChjb21wdXRlci5zaGlwc1tpXS5wb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY3JlYXRpbmcgc2hpcHMgcmFuZG9tbHlcclxuICAgIGNvbnN0IHJhbmRvbWlzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmFuZG9tUGxheWVyXCIpO1xyXG4gICAgcmFuZG9taXNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwbGF5ZXJTaGlwcylcclxuICAgIGNvbXB1dGVyU2hpcHMoKTtcclxufVxyXG5cclxuZXhwb3J0IHtwbGF5ZXIsIGNvbXB1dGVyfSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdhbWVCb2FyZCgpe1xyXG4gICAgZnVuY3Rpb24gbWFrZVJvd3MoZGl2LHJvd3MgPSAxMCwgY29scz0xMCkge1xyXG4gICAgICAgIGRpdi5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZ3JpZC1yb3dzXCIsIHJvd3MpO1xyXG4gICAgICAgIGRpdi5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZ3JpZC1jb2xzXCIsIGNvbHMpO1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgKHJvd3MgKiBjb2xzKTsgYysrKSB7XHJcbiAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChjZWxsKTtcclxuICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcImdyaWQtaXRlbVwiKTtcclxuICAgICAgICAgIGNlbGwuaWQgPSBjO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb25zdCBwbGF5ZXJPbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci0xXCIpO1xyXG4gICAgY29uc3QgcGxheWVyVHdvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItMlwiKTtcclxuICAgIC8vIGNyZWF0ZXMgMTB4MTAgYm94IGZvciBib3RoIHBsYXllcnNcclxuICAgIG1ha2VSb3dzKHBsYXllck9uZSk7XHJcbiAgICBtYWtlUm93cyhwbGF5ZXJUd28pO1xyXG59IiwiaW1wb3J0IGhpdEJvYXJkIGZyb20gXCIuL2dhbWVDcmVhdGlvbi9oaXRHYW1lQm9hcmRcIjtcclxuaW1wb3J0IHNoaXBzICBmcm9tIFwiLi9nYW1lQ3JlYXRpb24vc2hpcFBsYWNlbWVudFwiO1xyXG5cclxuc2hpcHMoKTtcclxuaGl0Qm9hcmQoKTsiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xyXG5pbXBvcnQgeyBjb21wdXRlciwgcGxheWVyIH0gZnJvbSBcIi4vc2hpcFBsYWNlbWVudFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGl0Qm9hcmQoKXtcclxuXHJcbiAgICBjb25zdCBjaGVja0dhbWVFbmQgPSAocGVyc29uKT0+e1xyXG4gICAgICAgIGlmKHBlcnNvbi5ib2FyZC5oYXNTaGlwQXJyYXkubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FtZVwiKTtcclxuICAgICAgICAgICAgbWFpbi5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7IC8vIGFmdGVyIGdhbWUgZW5kcyBET00gYWxsb3dlZFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtwZXJzb24ubmFtZX0gTG9zdGApOyAvLyBpZGlzcGxheXNcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYXJyYXkgZm9yIHJlY29yZGluZyBzaG90c1xyXG4gICAgY29uc3Qgc2hvdHNBcnJheSA9IFtdO1xyXG4gICAgY29uc3Qgc2hvdHNBcnJheUNvbXAgPSBbXTtcclxuICAgIGNvbnN0IHBsYXllck9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxheWVyLTFcIik7XHJcbiAgICBjb25zdCBwbGF5ZXJUd28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci0yXCIpO1xyXG4gICAgcGxheWVyT25lLmNsYXNzTGlzdC5hZGQoXCJ0dXJuXCIpOyAvLyBkaXNiYWxpbmcgRE9NIGZvciBvcHBvc2l0ZSBwbGF5ZXJcclxuICAgIFxyXG5cclxuICAgIGNvbnN0IGNvbXB1dGVyUGxheSA9ICgpPT57Ly8gcmFuZG9tIGNvbXB1dGVyIHBsYXlzXHJcbiAgICAgICAgY29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnBsYXllci5ib2FyZC5ib2FyZFBvc2l0aW9uQXJyYXkubGVuZ3RoKVxyXG4gICAgICAgIGNvbnN0IHBvcyA9IHBsYXllci5ib2FyZC5ib2FyZFBvc2l0aW9uQXJyYXlbcmFuZG9tTnVtYmVyXTtcclxuICAgICAgICAvLyByZW1vdmVzIHRoZSBwb3NpdGlvbiBmcm9tIHBsYXllcnMgYm9hcmQgYWZ0ZXIgc2hvdHNcclxuICAgICAgICBwbGF5ZXIuYm9hcmQuYm9hcmRQb3NpdGlvbkFycmF5LnNwbGljZShyYW5kb21OdW1iZXIsIDEpO1xyXG4gICAgICAgICAgICBpZighKHNob3RzQXJyYXlDb21wLmluY2x1ZGVzKHBvcykpKXsvLyBubyBoaXR0aW5nIHNhbWUgcG9zaXRpb24gdHdpY2VcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtwb3N9YCk7XHJcbiAgICAgICAgICAgICAgICBzaG90c0FycmF5Q29tcC5wdXNoKHBvcyk7Ly8gcHVzaGluZyBoaXQgcG9zaXRpb24gdG8gYXJyYXlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBBcnJheSA9IHBsYXllci5ib2FyZC5oYXNTaGlwQXJyYXk7XHJcbiAgICAgICAgICAgICAgICBpZihzaGlwQXJyYXkuaW5jbHVkZXMocG9zKSl7Ly8gaWYgc2hpcCBnZXRzIGhpdCBkaXYgY29sb3IgY2hhbmdlcyB0byByZWRcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hpcEFycmF5LnNwbGljZShzaGlwQXJyYXkuaW5kZXhPZihwb3MpLDEpOyAvLyByZW1vdmVzIHBvc2l0aW9uIGZyb20gc2hpcEFycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tHYW1lRW5kKHBsYXllcikpIHJldHVybiAwOy8vIGlmIGdhbWUgZW5kcyBubyBzd2l0Y2hpbmcgdHVybnNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7Ly8gaWYgbm90IGhpdCBkaXYgY2huYWdlcyB0byB5ZWxsb3dcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwieWVsbG93XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2VzIHR1cm4gdG8gb3RoZXIgcGxheWVyXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJPbmUuY2xhc3NMaXN0LmFkZChcInR1cm5cIik7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJUd28uY2xhc3NMaXN0LnJlbW92ZShcInR1cm5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ3JpZEl0ZW1Db21wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wbGF5ZXItMiAuZ3JpZC1pdGVtXCIpO1xyXG4gICAgZ3JpZEl0ZW1Db21wLmZvckVhY2goKGl0ZW0pPT57XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcclxuICAgICAgICAgICAgY29uc3QgcG9zID0gcGFyc2VGbG9hdChpdGVtLmlkKTtcclxuICAgICAgICAgICAgaWYoIShzaG90c0FycmF5LmluY2x1ZGVzKHBvcykpKXsvLyBjYW4ndCBoaXQgc2FtZSBwb3NpdGlvbiB0d2ljZVxyXG4gICAgICAgICAgICAgICAgc2hvdHNBcnJheS5wdXNoKHBvcyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwQXJyYXkgPSBjb21wdXRlci5ib2FyZC5oYXNTaGlwQXJyYXk7XHJcbiAgICAgICAgICAgICAgICBpZihzaGlwQXJyYXkuaW5jbHVkZXMocG9zKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiOy8vIGhpdCBzaWduYWxsaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgc2hpcEFycmF5LnNwbGljZShzaGlwQXJyYXkuaW5kZXhPZihwb3MpLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNoZWNrR2FtZUVuZChjb21wdXRlcikpIHJldHVybiAwOy8vIGlmIGdhbWUgZW5kcyBubyBzd2l0Y2hpbmcgdHVybnNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInllbGxvd1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdHVybiBzd2l0Y2hpbmdcclxuICAgICAgICAgICAgICAgIHBsYXllclR3by5jbGFzc0xpc3QuYWRkKFwidHVyblwiKTtcclxuICAgICAgICAgICAgICAgIHBsYXllck9uZS5jbGFzc0xpc3QucmVtb3ZlKFwidHVyblwiKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbXB1dGVyIGF0dGFja3MgYWZ0ZXIgMSBzZWNcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyUGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn0iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJuYW1lIiwidGhpcyIsInNoaXBzIiwiYm9hcmQiLCJib2FyZFBvc2l0aW9uQXJyYXkiLCJoYXNTaGlwQXJyYXkiLCJib2FyZENyZWF0ZSIsImkiLCJwdXNoIiwicmVjZWl2ZUF0dGFjayIsInBvcyIsImluY2x1ZGVzIiwic3BsaWNlIiwiY2hlY2tpbmdJZkhpdCIsImluZGV4T2YiLCJnYW1lRW5kIiwibGVuZ3RoIiwic2hpcHNQbGFjZW1lbnQiLCJzaGlwc0FyciIsInNob3J0ZWRTaGlwc0FyciIsInNvcnQiLCJhIiwiYiIsImJvcmRlckhvcml6b250YWwiLCJib3JkZXJWZXJ0aWNhbCIsImV2ZXJ5IiwiZWxlbSIsIlNoaXBzIiwicG9zaXRpb24iLCJoaXRzIiwiaGFzU3Vua2VuIiwiaGl0IiwiaXNTdW5rIiwiY29tcHV0ZXIiLCJtYWtlUm93cyIsImRpdiIsInJvd3MiLCJjb2xzIiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsImMiLCJjZWxsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpZCIsInBsYXllck9uZSIsInF1ZXJ5U2VsZWN0b3IiLCJwbGF5ZXJUd28iLCJnZXRSYW5kb21MZWdhbFBvc2l0aW9uIiwiaiIsInBlcnNvbiIsInJhbmRvbU51bWJlciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm5ld0FycmF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJncmlkSXRlbVBsYXllciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZ3JpZCIsImJhY2tncm91bmRDb2xvciIsInBsYXllclNoaXAiLCJwYXJzZUludCIsImNvbXBTaGlwIiwiY29tcHV0ZXJTaGlwcyIsImNoZWNrR2FtZUVuZCIsInBvaW50ZXJFdmVudHMiLCJzaG90c0FycmF5Iiwic2hvdHNBcnJheUNvbXAiLCJpdGVtIiwicGFyc2VGbG9hdCIsInNoaXBBcnJheSIsInJlbW92ZSIsInNldFRpbWVvdXQiLCJnZXRFbGVtZW50QnlJZCIsImNvbXB1dGVyUGxheSIsImhpdEJvYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==